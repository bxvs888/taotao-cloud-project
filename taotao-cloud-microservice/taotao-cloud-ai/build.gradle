repositories {
    mavenLocal()
    mavenCentral()

    maven {
        url "https://repo1.maven.org/maven2"
    }

    maven {
        allowInsecureProtocol = true
        url 'https://maven.aliyun.com/repository/public'
    }
    maven {
        allowInsecureProtocol = true

        credentials {
            username = findProperty("mavenUsername") ?: System.getenv("TAOTAO_CLOUD_MAVEN_USERNAME")
            password = findProperty("mavenPassword") ?: System.getenv("TAOTAO_CLOUD_MAVEN_PASSWORD")
        }
        url 'https://repo.rdc.aliyun.com/repository/136936-release-reey0l/'
    }
    //阿里云新的仓库
    maven {
        credentials {
            username = findProperty("mavenUsernameNew") ?: System.getenv("TAOTAO_CLOUD_MAVEN_USERNAME_NEW")
            password = findProperty("mavenPasswordNew") ?: System.getenv("TAOTAO_CLOUD_MAVEN_PASSWORD_NEW")
        }
        url 'https://packages.aliyun.com/60516c4824e1e6fbecd22990/maven/2085441-release-8v0qbs'
    }

    maven {
        allowInsecureProtocol = true
        url "https://mirrors.cloud.tencent.com/nexus/repository/maven-public/"
    }

    maven {
        allowInsecureProtocol = true
        url "https://mirrors.huaweicloud.com/repository/maven/"
    }

    maven { url "https://repo.spring.io/snapshot" }
    maven { url "https://repo.spring.io/milestone" }
    maven { url 'https://repo.spring.io/release' }

    maven { url "https://maven.aliyun.com/repository/central" }
    maven { url "https://maven.aliyun.com/repository/public" }
    maven { url "https://maven.aliyun.com/repository/google" }
    maven { url "https://maven.aliyun.com/repository/gradle-plugin" }
    maven { url "https://maven.aliyun.com/repository/spring" }
    maven { url "https://maven.aliyun.com/repository/spring-plugin" }
    maven { url "https://maven.aliyun.com/repository/grails-core" }
    maven { url "https://maven.aliyun.com/repository/apache-snapshots" }

    maven { url "https://repository.aspose.com/repo/" }
    maven { url "https://repo.e-iceblue.cn/repository/maven-public/" }

    maven { url "https://s01.oss.sonatype.org/content/repositories/snapshots/" }
}

dependencies {
    implementation platform("org.springframework.ai:spring-ai-bom:1.0.0-M7")

    //cloud
    implementation "io.github.shuigedeng:taotao-cloud-starter-stream"
    implementation "io.github.shuigedeng:taotao-cloud-starter-alibaba"
    implementation "io.github.shuigedeng:taotao-cloud-starter-ttc"
    implementation "io.github.shuigedeng:taotao-cloud-starter-openfeign"

    //boot
    implementation "io.github.shuigedeng:taotao-boot-starter-eventbus"
    implementation "io.github.shuigedeng:taotao-boot-starter-mq-pulsar"
    implementation "io.github.shuigedeng:taotao-boot-starter-mq-rocketmq"
    implementation "io.github.shuigedeng:taotao-boot-starter-mq-kafka"
    implementation "io.github.shuigedeng:taotao-boot-starter-grpc"
    implementation "io.github.shuigedeng:taotao-boot-starter-lock"
    implementation "io.github.shuigedeng:taotao-boot-starter-dingtalk"
    implementation "io.github.shuigedeng:taotao-boot-starter-elk"
    implementation "io.github.shuigedeng:taotao-boot-starter-captcha"
    implementation "io.github.shuigedeng:taotao-boot-starter-office"
    implementation "io.github.shuigedeng:taotao-boot-starter-third-client"
    implementation "io.github.shuigedeng:taotao-boot-starter-web"
    implementation "io.github.shuigedeng:taotao-boot-starter-webagg"

    //AVIATOR——轻量级JAVA表达式求值引擎 https://blog.csdn.net/ZhangQingmu/article/details/125087255
    //https://code.google.com/p/aviator/
    //http://code.google.com/p/aviator/wiki/User_Guide_zh
    //https://search.maven.org/artifact/com.googlecode.aviator/aviator
    implementation "com.googlecode.aviator:aviator:5.4.3"

    //https://search.maven.org/artifact/com.google.protobuf/protobuf-java
    implementation "com.google.protobuf:protobuf-java:4.30.2"
    //https://search.maven.org/artifact/com.google.protobuf/protobuf-java-util
    implementation "com.google.protobuf:protobuf-java-util:4.30.2"
    //https://search.maven.org/artifact/com.googlecode.protobuf-java-format/protobuf-java-format
    //implementation "com.googlecode.protobuf-java-format:protobuf-java-format:1.4"

    //https://search.maven.org/artifact/io.protostuff/protostuff-core
    implementation "io.protostuff:protostuff-core:1.8.0"
    //https://search.maven.org/artifact/io.protostuff/protostuff-runtime
    implementation "io.protostuff:protostuff-runtime:1.8.0"

    //https://search.maven.org/artifact/org.apache.velocity/velocity-engine-core
    implementation 'org.apache.velocity:velocity-engine-core:2.4.1'

    //https://search.maven.org/artifact/org.freemarker/freemarker
    implementation 'org.springframework.boot:spring-boot-starter-freemarker'

    implementation "com.alibaba.cloud.ai:spring-ai-alibaba-starter:1.0.0-M6.1"

    //spring ai
    // https://repo.spring.io/milestone
    // https://repo.spring.io/snapshot
    implementation 'org.springframework.ai:spring-ai-starter-model-anthropic'
    //使用OpenAI
    implementation 'org.springframework.ai:spring-ai-starter-model-openai'
    //使用transformers
    implementation 'org.springframework.ai:spring-ai-starter-model-transformers'
    //使用ollama
    implementation 'org.springframework.ai:spring-ai-starter-model-ollama'
    //redis
    implementation 'org.springframework.ai:spring-ai-starter-vector-store-redis'
    //使用PGVector作为向量数据库
    implementation 'org.springframework.ai:spring-ai-starter-vector-store-pgvector'
    //引入PDF解析器
    implementation 'org.springframework.ai:spring-ai-pdf-document-reader'

    //mcp
    implementation 'org.springframework.ai:spring-ai-starter-mcp-server-webmvc'
    implementation 'org.springframework.ai:spring-ai-starter-mcp-server-webflux'
    implementation 'org.springframework.ai:spring-ai-starter-mcp-client-webflux'
    implementation 'org.springframework.ai:spring-ai-starter-mcp-server'
    implementation 'org.springframework.ai:spring-ai-starter-mcp-client'

    implementation 'org.springframework.ai:spring-ai-spring-boot-testcontainers'

    //implementation 'org.springframework.ai:spring-ai-azure-openai-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-azure-vector-store-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-bedrock-ai-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-chroma-store-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-milvus-store-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-mistral-ai-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-neo4j-store-spring-boot-starter'

    //implementation 'org.springframework.ai:spring-ai-pinecone-store-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-postgresml-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-qdrant-store-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-stability-ai-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-vertex-ai-gemini-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-vertex-ai-palm2-spring-boot-starter'
    //implementation 'org.springframework.ai:spring-ai-weaviate-store-spring-boot-starter'

    annotationProcessor "com.querydsl:querydsl-apt:5.1.0:jakarta"
    api "com.querydsl:querydsl-jpa:5.1.0:jakarta"
    api "jakarta.persistence:jakarta.persistence-api:3.1.0"
    annotationProcessor "jakarta.persistence:jakarta.persistence-api:3.1.0"

    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

mainClassName = "com.taotao.cloud.ai.TaoTaoCloudAiApplication"
description = "ai中心"
archivesBaseName = 'taotao-cloud-ai'

configurations {
    configureEach {
        resolutionStrategy.cacheChangingModulesFor 0, "seconds"
        resolutionStrategy.cacheDynamicVersionsFor 0, "seconds"

        resolutionStrategy {
            force "org.bouncycastle:bcprov-jdk15on:1.70"
            force "org.springframework.ai:spring-ai-bedrock:1.0.0-M7"
            force "org.springframework.ai:spring-ai-azure-openai:1.0.0-M7"
            force "org.springframework.ai:spring-ai-ollama:1.0.0-M7"
            force "org.springframework.ai:spring-ai-openai:1.0.0-M7"
            force "org.springframework.ai:spring-ai-retry:1.0.0-M7"
            force "org.springframework.ai:spring-ai-transformers:1.0.0-M7"
            force "org.springframework.ai:spring-ai-zhipuai:1.0.0-M7"
            force "org.springframework.ai:spring-ai-minimax:1.0.0-M7"
            force "org.springframework.ai:spring-ai-mistral-ai:1.0.0-M7"
        }

        exclude group: "org.springframework.boot", module: "spring-boot-starter-data-jpa"
        exclude group: "org.springframework.boot", module: "spring-boot-starter-tomcat"
        exclude group: "com.querydsl", module: "querydsl-apt"
        exclude group: "commons-logging", module: "commons-logging"
        exclude group: "com.redis.om", module: "redis-om-spring"
    }
}
